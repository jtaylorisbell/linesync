# Databricks Asset Bundle configuration for Inventory Demo
#
# Deploy with: databricks bundle deploy -t <target>
#
# Targets:
#   - dev: Development environment
#   - prod: Production environment

bundle:
  name: inventory-demo

# Include resource definitions from the resources directory
include:
  - resources/*.yml

# Workspace sync configuration
sync:
  include:
    - src/**
    - frontend/dist/**
    - marketing/**
    - sql/**
    - pipelines/**
    - app.py
    - app.yaml
    - pyproject.toml
    - requirements.txt

# Variables with defaults (can be overridden per target)
variables:
  lakebase_project_id:
    description: Lakebase project ID
    default: linesync
  lakebase_branch_id:
    description: Lakebase branch ID
    default: main
  lakebase_endpoint_id:
    description: Lakebase endpoint ID
    default: default
  lakebase_database:
    description: Lakebase database name
    default: postgres
  lakebase_catalog:
    description: Unity Catalog name for Lakebase instance
    default: buildathon_isbell_pg_catalog
  lakebase_schema:
    description: Schema in Lakebase catalog containing source tables
    default: public
  target_catalog:
    description: Unity Catalog for output Delta tables
    default: serverless_edn2pd_catalog
  sql_warehouse_id:
    description: SQL Warehouse ID for alerts and queries
    default: starter

# Target environments
targets:
  dev:
    mode: development
    default: true
    workspace:
      profile: fe-sandbox
      root_path: /Workspace/Users/${workspace.current_user.userName}/.bundle/${bundle.name}/dev

  prod:
    mode: production
    workspace:
      root_path: /Workspace/Users/${workspace.current_user.userName}/.bundle/${bundle.name}/prod
    run_as:
      user_name: ${workspace.current_user.userName}
